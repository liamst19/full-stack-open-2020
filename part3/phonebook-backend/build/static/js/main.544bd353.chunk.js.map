{"version":3,"sources":["services/phonebookdata.js","components/Filter.js","components/AddNew.js","components/PhoneBook.js","components/Message.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","person","post","delete","id","put","Filter","props","value","filterName","onChange","handleFilterChange","AddNew","onSubmit","handleAdd","name","handleNameChange","number","handleNumberChange","type","Person","key","onClick","e","window","confirm","handleDelete","PhoneBook","persons","map","Message","className","message","addedMsg","deletedMsg","alreadyRemovedMsg","updatedMsg","switchMsg","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilterName","setMessageContent","useEffect","phonebookdata","personsToShow","filter","includes","setMessage","msg","setTimeout","target","preventDefault","newPerson","trim","oldPerson","find","toLowerCase","updatedPerson","catch","concat","personToDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.544bd353.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\n// const baseUrl = 'http://localhost:3001/persons';\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getNumbers = () => {\r\n    const response = axios.get(baseUrl);\r\n    return response.then(response => response.data);\r\n};\r\n\r\nconst addNumber = person => {\r\n    const response = axios.post(baseUrl, person);\r\n    return response.then(response => response.data); \r\n};\r\n\r\nconst deleteNumber = person => {\r\n    const response = axios.delete(baseUrl + '/' + person.id);\r\n    return response;\r\n};\r\n\r\nconst updateNumber = person => {\r\n    const response = axios.put(baseUrl + '/' + person.id, person);\r\n    return response.then(response => response.data);\r\n};\r\n\r\nexport default{ getNumbers, addNumber, deleteNumber, updateNumber };\r\n","import React from 'react';\r\n\r\nconst Filter = props => {\r\n    return(<div>\r\n      <form>\r\n        filter shown with <input value={props.filterName} onChange={props.handleFilterChange} />\r\n      </form>\r\n    </div>);\r\n}\r\n\r\nexport default Filter","import React from 'react';\r\n\r\nconst AddNew = props => {\r\n    return(<div>\r\n      <h2>add a new</h2>\r\n      <form onSubmit={props.handleAdd}>\r\n        <div>\r\n          name: <input value={props.name} onChange={props.handleNameChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={props.number} onChange={props.handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>)\r\n}\r\n\r\nexport default AddNew","import React from 'react';\r\n\r\nconst Person = props => {\r\n\r\n  const handleDelete = e => {\r\n    if(window.confirm(`Delete ${props.person.name}?`)) props.handleDelete(props.person);\r\n  }\r\n\r\n  return (\r\n  <li key={props.person.id}>\r\n      {props.person.name} {props.person.number}\r\n      <button onClick={handleDelete}>delete</button>\r\n  </li>\r\n  )\r\n};\r\n\r\nconst PhoneBook = props => {\r\n    return (\r\n      <div>\r\n        <h2>Numbers</h2> \r\n        <ul>\r\n          {props.persons.map(person => <Person key={person.id} person={person} handleDelete={props.handleDelete} />)}  \r\n        </ul>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default PhoneBook\r\n","import React from 'react';\r\nimport '../css/Message.css';\r\n\r\nconst addedMsg = name => `Added ${name}`;\r\nconst updatedMsg = name => `Updated number for ${name}`;\r\nconst deletedMsg = name => `Deleted ${name}`;\r\nconst alreadyRemovedMsg = name => `Information of ${name} has already been removed from server`;\r\n\r\nconst Message = props => {\r\n\r\n    const switchMsg = (type, name) => {\r\n        switch(type){\r\n            case 'added':\r\n                return addedMsg(name);\r\n            case 'deleted':\r\n                return deletedMsg(name);\r\n            case 'error':\r\n                return alreadyRemovedMsg(name);\r\n            case 'updated':\r\n                return updatedMsg(name);\r\n            default: \r\n                return '';\r\n        }\r\n    }\r\n\r\n    return (<div className={`message ${props.message.type}`}>\r\n       {switchMsg(props.message.type, props.message.name)} \r\n    </div>)    \r\n};\r\n\r\nexport default Message;","import React, {useState, useEffect} from 'react'\nimport phonebookdata from './services/phonebookdata'\n\nimport Filter from './components/Filter'\nimport AddNew from './components/AddNew'\nimport PhoneBook from './components/PhoneBook'\nimport Message from './components/Message'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filterName, setFilterName ] = useState('')\n  const [ message, setMessageContent ] = useState({\n  })\n\n  useEffect(()=>{\n    phonebookdata.getNumbers()\n      .then(data=> {\n        setPersons(data)\n      })\n  }, [])\n\n  const personsToShow = persons.filter(person => person.name.includes(filterName))\n\n  const setMessage = msg => {\n    setMessageContent(msg)\n    if(msg.type !== 'removed'){\n      window.setTimeout(()=> setMessageContent({}), 2000)\n    }\n  }\n\n  const handleAdd = e => {\n    e.preventDefault()\n\n    const newPerson = {\n      name: newName.trim(),\n      number: newNumber.trim(),\n    }\n\n    const oldPerson = persons.find(person => person.name.toLowerCase() === newPerson.name.toLowerCase())\n\n    if(oldPerson){\n      if(window.confirm(`${newPerson.name} is already added to phonebook. Replace old number with a new one?`)){\n        phonebookdata\n          .updateNumber({\n            name: newPerson.name,\n            number: newPerson.number,\n            id: oldPerson.id\n          })\n          .then(updatedPerson => {\n            setPersons(persons.map(person => person.id === updatedPerson.id ? updatedPerson : person ))\n            setMessage({type: 'updated', name: updatedPerson.name})\n          })\n          .catch(()=>{\n            setMessage({type: 'error', name: oldPerson.name})\n          })\n      }\n    }\n    else{\n      phonebookdata\n        .addNumber(newPerson)\n        .then(person => {\n          setPersons(persons.concat(person))\n          setMessage({type: 'added', name: person.name})\n        })\n    }\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const handleDelete = personToDelete => {\n    phonebookdata\n      .deleteNumber(personToDelete)\n      .then(() => {\n        setPersons(persons.filter(person => person.id !== personToDelete.id))\n        setMessage({type: 'deleted', name: personToDelete.name})\n      })\n  }\n\n  const handleNameChange = e => setNewName(e.target.value)\n  const handleNumberChange = e => setNewNumber(e.target.value)\n  const handleFilterChange = e => setFilterName(e.target.value)\n\n  return (<div>\n      <h1>Phonebook</h1>\n      <Message message={message} />\n      <Filter filterName={filterName} handleFilterChange={handleFilterChange} />\n      <AddNew \n        name={newName} handleNameChange={handleNameChange} \n        number={newNumber} handleNumberChange={handleNumberChange}\n        handleAdd={handleAdd} />\n      <PhoneBook persons={personsToShow} handleDelete={handleDelete} />\n  </div>)\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}